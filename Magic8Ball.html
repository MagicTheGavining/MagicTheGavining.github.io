<!DOCTYPE html>
<!-- This is based on DillingerLee's great template here:
https://github.com/Team-Code/KA_Offline -->
<html> 
 <head>
 	<meta charset="utf-8">
    <title>Magic 8 Ball</title> 
</head>
 <body>
    <p align="center"> 
	<!--This draws the Canvas on the webpage -->
      <canvas id="mycanvas"></canvas> 
    </p>
 </body>
 
 <!-- Run all the JavaScript stuff -->
 <!-- Include the processing.js library -->
 <!-- See https://khanacademy.zendesk.com/hc/en-us/articles/202260404-What-parts-of-ProcessingJS-does-Khan-Academy-support- for differences -->
 <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
 
 <script>
    var sketchProc = function(processingInstance) {
     with (processingInstance) {
        size(400, 400); 
        frameRate(30);
        
        // ProgramCodeGoesHere
        /*****************
* Modified by MagicTheGavining
* Oct. 25 & 31, 2019
* Nov. 2, 2019
* Feb. 26 - 29, 2020
* +Reveal number of possible
*  answers when lower left is clicked
* +Infused with purple spirit power!
* +Switch Statement to replace if/else
* +Different Colored triangles
* +Function to draw triangle
* +8 Ball's Number
* +Purple liquid behind triangle
* +Ask button and instructions
* +Color changing button
* +Sparks on new answer
*****************/
var colorShift = 0;
var increaseColor = true;
var magicSparks = false;
var fadeInAnswer = false;
var alphaAnswer = 0;
var sparkDistance = 0;
var sparkSizeA = 3;
var sparkSizeB = 3;
var sparkSizeC = 3;
var sparkSizeD = 3;
var coverOpacity = 255;
var UPPER_LIMIT = 41;
var answer = UPPER_LIMIT;
var fontMono = createFont("monospace");

//Generate a random number out of 5 possibilities
var ask8Ball = function(){
    answer = floor(random(0, UPPER_LIMIT));
};

//Draw the triangle inside the 8-Ball using this function
var drawTriangle = function(triangleColor, textColor, sizeForText, messageLineA, messageLineB, messageLineC, messageLineD){
    fill(triangleColor);
    triangle(200, 123, 271, 248, 129, 248);
    fill(textColor);
    textSize(sizeForText);
    text(messageLineA, 184, 185);
    text(messageLineB, 163, 202);
    text(messageLineC, 154, 219);
    text(messageLineD, 144, 236);
};



draw = function() {
    
    background(51, 0, 14);
    textFont(fontMono, 20); //Make a default text
    
    //Draw the 8-Ball
    fill(0);
    ellipse(200, 200, 305, 305);
    
    //Purple liquid
    fill(45, 0, 82);
    ellipse(200, 200, 178, 178);
    
    //8 Ball label
    fill("white");
    ellipse(200, 75, 98, 47);
    fill(0);
    textSize(39);
    text("8", 186, 87);
    
    //Asking Button
    strokeWeight(4);
    stroke(0);
    
    //Cycle between dark and light blue
    if( colorShift >= 80 && increaseColor){
        increaseColor = false;
    } else if(increaseColor && colorShift <=80){
        colorShift = colorShift + 1;
    } else if (colorShift >= 0 && !increaseColor){
        colorShift--;
    } else { //colorShift has dropped below 0
        increaseColor = true;
    }
    fill((0 + colorShift), (0 + colorShift), (70 + colorShift));
        rect(300, 334, 87, 51, 4);
    fill(255, 255, 255);
    textSize(25);
    text("Ask", 313, 368);
    
    //Draw mini 8 Ball
    strokeWeight(0);
    fill(0);
    ellipse(372, 360, 18, 18);
    fill(255);
    ellipse(372, 360, 12,12);
    fill(0);
    textSize(7);
    text("8",370, 362);
    strokeWeight(2);
    
    //Reveal amount of possible answers
    
    textSize(16);
    if(fadeInAnswer) {
        alphaAnswer += 2;
    } else {
        alphaAnswer = 0;
    }
    fill(242, 255, 0, alphaAnswer);
    text("The 8 Ball has: " + UPPER_LIMIT + " possible answers", 20, 360, 190, 40);
    
    //Output different answers depending on what random number
    //was assigned to the "answer" variable
    //Using switch instead of if/else - more concise.
    //answer = 36;
    switch(answer){
         case 0:
            drawTriangle(color(255, 247, 0), color(0), 13, "THE", "BUZZING", "BEEHIVE HAS", "  TOLD ME YES!");
        break;
        case 1:
            drawTriangle(color(0, 189, 13), color(255, 255, 255), 14, "YES!", "CERTAINLY");
        break;
        case 2:
            drawTriangle(color(161, 0, 0), color(255, 247, 0), 14, "NO,", " IT WILL", "NOT HAPPEN!");
        break;
        case 3:
            drawTriangle(color(87, 86, 83), color(255), 16, "", " MAYBE,", "  ANSWER", " IS UNCLEAR");
        break;
        case 4:
            drawTriangle(color(201, 0, 184), color(255), 11, "YOU", "ARE STRUCK", "BY SOMETHING", "FLUFFY AND SOFT!");
        break;
        case 5:
            drawTriangle(color(252, 185, 41), color(143, 135, 30), 17, "", "ANSWER", "HAZY: TRY", "AGAIN LATER.");
        break;
        case 6:
            drawTriangle(color(255, 242, 0), color(0), 14, "YES,", "OF THIS I", "AM CERTAIN!");
        break;
        case 7:
            drawTriangle(color(255, 0, 30), color(255, 236, 94), 16, "YOU", "ALREADY", " KNOW THE", "   ANSWER...");
        break;
        case 8:
            drawTriangle(color(23, 22, 15), color(222, 33, 206), 14, "NOT", "  WORTH ", "  YOUR TIME", "  OR EFFORTS!");
        break;
        case 9:
            drawTriangle(color(0, 255, 208), color(0, 8, 94), 14, " IT", "SOUNDS", "GOOD, BUT", "DOESN'T WORK.");
        break;
        case 10:
            drawTriangle(color(238, 133, 245), color(196, 6, 6), 14,  "YOU", " REALLY", " WEAR THAT", "OUTFIT WELL!");
        break;
        case 11:
            drawTriangle(color(105, 105, 105), color(10, 8, 8), 14,  "I", "HATE TO ", "BEAR BAD", "NEWS, BUT.. NO");
        break;
        case 12:
            drawTriangle(color(156, 165, 166), color(138, 255, 198), 14, "THE", "SPIRIT IS", "WHISPERING", "  \"STAY HOME\"");
        break;
        case 13:
            drawTriangle(color(64, 117, 0), color(17, 61, 15), 21, "THE", " TEA", " LEAVES", "SAY YES!!");
        break;
        case 14:
            drawTriangle(color(0, 227, 201), color(0, 0, 0), 21, "ALL", "SIGNS", " POINT", " TO YES.");
        break;
        case 15:
            drawTriangle(color(227, 0, 0), color(0, 0, 0), 15, "TOO", "  MUCH", "  DEMONIC", "INTERFERENCE");
        break;
        case 16:
            drawTriangle(color(255, 255, 255), color(117, 117, 0), 15,  "AN", "ANGEL IS", " BLESSING", " YOU, YES!!");
        break;
        case 17:
            drawTriangle(color(0, 0, 0), color(102, 102, 100), 17,  "", "  AS", "THE CROW", "FLIES, YES!");
        break;
        case 18:
            drawTriangle(color(9, 140, 4), color(126, 255, 122), 16,  "", " LUCKY", " YOU!!!!", "ABSOLUTELY!");
        break;
        case 19:
            drawTriangle(color(138, 4, 4), color(255), 20,  "YOU", " SMELL", " GREAT", " TODAY!!");
        break;
        case 20:
            drawTriangle(color(71, 43, 0), color(194, 154, 54), 18,  "IT'S", "CARVED", " IN THE", " WOOD, YES.");
        break;
        case 21:
            drawTriangle(color(92, 0, 0), color(255, 174, 0),  14,  "THE", " FLAME IS", "LIT, BUT IT", " NEEDS FANNING");
        break;
        case 22:
            drawTriangle(color(5, 46, 0), color(207, 206, 203),  14,  "IT'S", " NAILS ON", "A CHALKBOARD", "  NO! STOP!!!");
        break;
        case 23:
            drawTriangle(color(0, 148, 113), color(0, 11, 46),  14,  "THE", "WEST WIND", " IS HOWLING", "  AGAINST IT!!");
        break;
        case 24:
            drawTriangle(color(43, 36, 3),color(139, 240, 215),  13,  "YES,", "BUT ONLY", "AFTER STRONG", " BLACK COFFEE!");
        break;
        case 25:
            drawTriangle(color(189, 169, 79),color(0, 0, 0),  12,  "PICK", " A RANDOM", " BIBLE VERSE", " FOR AN ANSWER");
        break;
        case 26:
            drawTriangle(color(199, 0, 10), color(248, 156, 255), 15,  "THE", "WAY YOUR", "HAIR FALLS", " IS PERFECT!");
        break;
        case 27:
            drawTriangle(color(110, 234, 245), color(8, 43, 0), 14,  "ON", " A SCALE", " FROM 1 TO", "10, YOU'RE 11!");
        break;
        case 28:
            drawTriangle(color(219, 168, 0), color(71, 9, 128), 11,  "YOU", "ARE REALLY", " RIDICULOUSLY", "  GOOD LOOKING!");
        break;
        case 29:
            drawTriangle(color(133, 111, 40), color(0), 17,  "I", "CAST", "THE RUNES", "AND... NO!");
        break;
        case 30:
            drawTriangle(color(133, 111, 40), color(0), 17,  "I", "CAST", "THE RUNES", "AND... YES!");
        break;
        case 31:
            drawTriangle(color(112, 29, 29), color(232, 14, 14), 17,  "THE", "SQUISHY", "ENTRAILS", "TELL ME NO!");
        break;
        case 32:
            drawTriangle(color(112, 29, 29), color(232, 14, 14), 17,  "THE", "SQUISHY", "ENTRAILS", "  SAY YES!");
        break;
        case 33:
            drawTriangle(color(7, 28, 11), color(130, 130, 130), 17,  "DO", "NOT TOY", "WITH THAT", "IDEA, EVER.");
        break;
        case 34:
            drawTriangle(color(207, 185, 131), color(156, 22, 22), 15,  "THE", "HEADLESS", "  CHICKEN", "FELL ON \"NO\"");
        break;
        case 35:
            drawTriangle(color(207, 185, 131), color(156, 22, 22), 14,  "THE", "HEADLESS", "  CHICKEN", "FELL ON \"YES\"");
        break;
        case 36:
            drawTriangle(color(132, 188, 207), color(0, 12, 102), 14,  "THE", "CRYSTAL", "BALL FORE-", "SEES HAPPINESS.");
        break;
        case 37:
            drawTriangle(color(132, 188, 207), color(0, 12, 102), 14,  "THE", "CRYSTAL", "BALL FORE-", "SEES SORROW.");
        break;
        case 38:
            drawTriangle(color(189, 145, 0), color(16, 97, 16), 14,  "THE", "  OOMPA", "LOOMPAS WILL", "   JUICE YOU.");
        break;
        case 39:
            drawTriangle(color(230, 194, 74), color(64, 33, 0), 14,  "SAYTH", " FLYING", " SPAGHETTI", "MONSTER: \"YEA\"");
        break;
        case 40:
            drawTriangle(color(112, 76, 255), color(2, 56, 0), 18,  "A", "CHANGE", "OCCURRED", "FOR GOOD!!");
        break;
        default: //Impossible answer to start
            drawTriangle(color(5, 50, 250), color(255), 11, "THINK", "OF A YES OR", " NO QUESTION,", "  THEN ASK ME!!");
        
    }
    
    if(magicSparks && sparkDistance < 85){
        strokeWeight(random(4, 13));
        stroke(color(45, 0, 82, 220));
        drawTriangle(color(45, 0, 82, coverOpacity));
        fill(255, 0, 242);
        ellipse(200, 200 + sparkDistance, sparkSizeA, sparkSizeA);
        ellipse(200 + sparkDistance, 200, sparkSizeC, sparkSizeC);
        ellipse(200 + (sparkDistance/1.7), 200 + (sparkDistance/1.7), sparkSizeB, sparkSizeB);
        ellipse(200 + (sparkDistance/1.7), 200 - (sparkDistance/1.7), sparkSizeD, sparkSizeD);
        ellipse(200 - (sparkDistance/1.7), 200 + (sparkDistance/1.7), sparkSizeD, sparkSizeD);
        ellipse(200 - (sparkDistance/1.7), 200 - (sparkDistance/1.7), sparkSizeB, sparkSizeB);
        ellipse(200 - sparkDistance, 200, sparkSizeC, sparkSizeC);
        ellipse(200, 200 - sparkDistance, sparkSizeA, sparkSizeA);
        sparkSizeA = floor(random(1, 8));
        sparkSizeB = floor(random(1, 12));
        sparkSizeC = floor(random(1, 10));
        sparkSizeD = floor(random(1, 5));
        sparkDistance += 1;
        coverOpacity -= 1;
        textSize(39 + sparkSizeD);
        fill(150, 0, 230);
        text("8", 185, 88);
    } else {
        sparkDistance =0;
        coverOpacity = 255;
        magicSparks = false;
        stroke(0);
    }

};

mouseClicked = function(){
    //Check for Clicking of Ask Button
    if ((mouseX >= 300 && mouseX <387) && (mouseY >= 334 && mouseY <= 385)){
        ask8Ball();
        magicSparks = true;
    }
    
    //Check for revealing amount of answers
    if ((mouseX >= 20 && mouseX <210) && (mouseY >= 360 && mouseY <= 400)){
        fadeInAnswer  = true;
    } else {
        fadeInAnswer = false;
    }
};





    }};

    // Get the canvas that Processing-js will use
    var canvas = document.getElementById("mycanvas"); 
    // Pass the function sketchProc (defined in myCode.js) to Processing's constructor.
    var processingInstance = new Processing(canvas, sketchProc); 
 </script>

</html>
